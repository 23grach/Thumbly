<!DOCTYPE html>
<html>
<head>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f8f9fa;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      padding: 20px;
      max-width: 320px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .header {
      text-align: center;
      margin-bottom: 8px;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 4px;
    }

    .header p {
      font-size: 13px;
      color: #6b7280;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .form-label {
      font-size: 12px;
      font-weight: 500;
      color: #374151;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-input {
      padding: 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      background: white;
      transition: all 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-input::placeholder {
      color: #9ca3af;
    }

    .textarea {
      resize: vertical;
      min-height: 60px;
      font-family: inherit;
    }

    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 8px;
      padding: 12px;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      max-height: 120px;
      overflow-y: auto;
    }

    .emoji-item {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .emoji-item:hover {
      background: #f3f4f6;
    }

    .emoji-item.selected {
      background: #dbeafe;
      border-color: #3b82f6;
    }

    .theme-toggle {
      display: flex;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
    }

    .theme-option {
      flex: 1;
      padding: 10px 16px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .theme-option.active {
      background: #3b82f6;
      color: white;
    }

    .theme-option:not(.active) {
      color: #6b7280;
    }

    .theme-option:not(.active):hover {
      background: #f3f4f6;
    }

    .buttons {
      margin-top: auto;
      display: flex;
      gap: 8px;
    }

    .btn {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #3b82f6;
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      background: #2563eb;
    }

    .btn-primary:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #f3f4f6;
      color: #6b7280;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
    }

    .required {
      color: #ef4444;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Thumbly</h1>
      <p>–°–æ–∑–¥–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–π thumbnail –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</p>
    </div>

    <div class="form-group">
      <label class="form-label">
        –ó–∞–≥–æ–ª–æ–≤–æ–∫ <span class="required">*</span>
      </label>
      <input 
        type="text" 
        id="title" 
        class="form-input" 
        placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫..."
        maxlength="50"
        required
      >
    </div>

    <div class="form-group">
      <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
      <textarea 
        id="description" 
        class="form-input textarea" 
        placeholder="–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)..."
        maxlength="120"
      ></textarea>
    </div>

    <div class="form-group">
      <label class="form-label">–≠–º–æ–¥–∑–∏</label>
      <div class="emoji-grid" id="emoji-grid">
        <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">–¢–µ–º–∞</label>
      <div class="theme-toggle">
        <button class="theme-option active" data-theme="light">
          üåû –°–≤–µ—Ç–ª–∞—è
        </button>
        <button class="theme-option" data-theme="dark">
          üåö –¢—ë–º–Ω–∞—è
        </button>
      </div>
    </div>

    <div class="buttons">
      <button class="btn btn-secondary" id="cancel">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn btn-primary" id="create" disabled>–°–æ–∑–¥–∞—Ç—å</button>
    </div>
  </div>

  <script>
    // –°–ø–∏—Å–æ–∫ —ç–º–æ–¥–∑–∏
    const emojiList = [
      'üöÄ', '‚≠ê', 'üí°', 'üî•', '‚ù§Ô∏è', 'üëç',
      'üéØ', 'üìà', 'üèÜ', 'üíØ', 'üåü', '‚ö°',
      'üé®', 'üì±', 'üíª', 'üñ•Ô∏è', '‚åö', 'üéÆ',
      'üìö', 'üéì', 'üî¨', 'üß†', 'üí∞', 'üíé',
      'üåç', 'üåà', '‚òÄÔ∏è', 'üåô', 'üéâ', 'üéä',
      'üè†', 'üöó', '‚úàÔ∏è', 'üé∏', 'üéµ', 'üé™'
    ];

    let selectedEmoji = 'üöÄ';
    let selectedTheme = 'light';

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–º–æ–¥–∑–∏
    function initEmojis() {
      const emojiGrid = document.getElementById('emoji-grid');
      emojiList.forEach((emoji, index) => {
        const emojiItem = document.createElement('div');
        emojiItem.className = 'emoji-item';
        emojiItem.textContent = emoji;
        if (index === 0) emojiItem.classList.add('selected');
        
        emojiItem.addEventListener('click', () => {
          document.querySelectorAll('.emoji-item').forEach(item => {
            item.classList.remove('selected');
          });
          emojiItem.classList.add('selected');
          selectedEmoji = emoji;
        });
        
        emojiGrid.appendChild(emojiItem);
      });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
    function initTheme() {
      document.querySelectorAll('.theme-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.theme-option').forEach(opt => {
            opt.classList.remove('active');
          });
          option.classList.add('active');
          selectedTheme = option.dataset.theme;
        });
      });
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    function validateForm() {
      const title = document.getElementById('title').value.trim();
      const createBtn = document.getElementById('create');
      
      if (title.length > 0) {
        createBtn.disabled = false;
      } else {
        createBtn.disabled = true;
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.getElementById('title').addEventListener('input', validateForm);

    document.getElementById('create').addEventListener('click', () => {
      const title = document.getElementById('title').value.trim();
      const description = document.getElementById('description').value.trim();
      
      if (!title) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫');
        return;
      }

      parent.postMessage({
        pluginMessage: {
          type: 'create-thumbnail',
          data: {
            title,
            description,
            emoji: selectedEmoji,
            theme: selectedTheme
          }
        }
      }, '*');
    });

    document.getElementById('cancel').addEventListener('click', () => {
      parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*');
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    initEmojis();
    initTheme();
    validateForm();
  </script>
</body>
</html>
